(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1de2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("MainList",{attrs:{entity:"user"}})],1)},o=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"table-title row q-pb-md"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"table-title-text"},[t._v(t._s(t.entity))])])]),a("q-page-sticky",{attrs:{position:"top-left",offset:[40,30]}},[a("q-btn",{attrs:{size:"sm",fab:"",icon:"las la-plus",color:"green"},on:{click:t.create}})],1),a("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"name",pagination:t.pagination,loading:t.loading,"binary-state-sort":""},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"body-cell-avatar",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-avatar",{attrs:{size:"32px",rounded:""}},[a("img",{attrs:{src:t.row.profile.avatar,alt:""}})])],1)]}},{key:"body-cell-action",fn:function(e){return[a("q-td",{attrs:{props:e}},[a("q-btn",{attrs:{"icon-right":"las la-edit","no-caps":"",flat:"",dense:""},on:{click:function(a){return t.edit(e.row.id)}}}),a("q-btn",{attrs:{"icon-right":"las la-eye","no-caps":"",flat:"",dense:""},on:{click:function(a){return t.view(e.row.id)}}}),a("q-btn",{attrs:{"icon-right":"lar la-trash-alt","no-caps":"",flat:"",dense:""},on:{click:function(a){return t.remove(e.row.id)}}})],1)]}}])})],1)},s=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"bg-grey-1 text-white",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-3"},[a("q-select",{attrs:{"bg-color":"white",dense:"",outlined:"",options:t.columnOptions,label:"Field"},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}})],1),a("div",{staticClass:"col-3"},[a("q-select",{attrs:{"bg-color":"white",dense:"",outlined:"",options:t.operatorOptions,label:"Operator"},model:{value:t.operator,callback:function(e){t.operator=e},expression:"operator"}})],1),a("div",{staticClass:"col-6"},[a("q-input",{attrs:{"bg-color":"white",dense:"",outlined:"",label:"Value"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])])],1)},r=[],c={name:"WhereFilter",data(){return{column:"name",columnOptions:["id","name","email"],operator:"=",operatorOptions:[">","<","!="],value:""}}},u=c,d=a("2877"),p=Object(d["a"])(u,l,r,!1,null,"45264f0c",null),g=p.exports,m={props:["entity"],data(){return{filtering:[],filter:"",loading:!1,pagination:{sortBy:"name",descending:!1,page:1,rowsPerPage:10,rowsNumber:50},columns:[],defaultColumns:[{name:"action",label:"Action",field:"action"}],data:[],defaultFilter:{where:{column:"name",operator:"=",value:"Aaron Gleason"}}}},mounted(){let t=this;this.onRequest({pagination:this.pagination}),this.getFields().then((e=>{let a=Object.values(e);t.columns=a.concat(t.defaultColumns)})).catch((t=>{console.log("error",t)}))},methods:{remove(t){let e=this,a="admin/user/delete/"+t;this.$axios.get(a).then((t=>{console.log(t),e.onRequest({pagination:e.pagination}),e.$q.notify({message:"User deleted",color:"positive",position:"top-right"})}))},create(){this.$router.push({name:"user.create"})},view(t){this.$router.push({name:"user.view",params:{id:t}})},edit(t){this.$router.push({name:"user.edit",params:{id:t}})},onRequest(t){const{page:e,rowsPerPage:a,sortBy:n,descending:o}=t.pagination;this.getPaginatedItems(e,a,n,o).then((t=>{console.log(t),this.data=t.data,this.pagination.rowsNumber=t.total})),this.pagination.page=e,this.pagination.rowsPerPage=a,this.pagination.sortBy=n,this.pagination.descending=o,this.loading=!1},getPaginatedItems(t,e,a,n){let o=n?"-":"",i="admin/"+this.entity+"/all?page="+t+"&perPage="+e+"&sort="+o+a+"&include=profile";const s=this.$axios.post(i,[]),l=s.then((t=>t.data));return l},getFields(){let t={entity:this.entity,entityModel:this.entity},e="admin/common/entityFields";const a=this.$axios.post(e,t),n=a.then((t=>t.data));return n}},components:{WhereFilter:g}},h=m,f=Object(d["a"])(h,i,s,!1,null,null,null),b=f.exports,v={name:"UserIndex",components:{MainList:b}},w=v,q=Object(d["a"])(w,n,o,!1,null,null,null);e["default"]=q.exports}}]);